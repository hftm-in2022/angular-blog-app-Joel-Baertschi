<!-- Zeige Lade- oder Fehlerzustand an -->
<div class="blog-overview-container">
  <!-- Spinner anzeigen, solange isLoadingList = true -->
  <div class="spinner-container" *ngIf="isLoadingDetail">
    <mat-progress-spinner
      mode="indeterminate"
      diameter="50"
    ></mat-progress-spinner>
    <p>{{ "BLOG.LOADING" | translate }}</p>
  </div>
  <div *ngIf="errorDetail as e">
    <p style="color: red">{{ e }}</p>
  </div>

  <!-- Wenn Blog existiert, zeigen wir den Inhalt -->
  <div class="blog-container" *ngIf="blog as b">
    <div class="blog-header">
      <h1 class="blog-title">{{ b.title }}</h1>
      <p class="blog-meta">
        {{ "BLOG.AUTHOR" | translate }} <strong>{{ b.author }}</strong> |
        {{ "BLOG.WRITTEN" | translate }}: {{ b.createdAt }} |
        {{ "BLOG.UPDATED" | translate }}: {{ b.updatedAt }}
      </p>
    </div>

    <div class="blog-content">
      <p>{{ b.content }}</p>
    </div>

    <div class="blog-footer">
      <div class="likes-comments">
        <div class="icon-item">
          <mat-icon>thumb_up</mat-icon>
          <span>{{ b.likes }}</span>
        </div>
      </div>

      <div class="user-info">
        <p *ngIf="b.likedByMe">{{ "BLOG.LIKED_BY_ME" | translate }}</p>
        <p *ngIf="b.createdByMe">{{ "BLOG.CREATED_BY_ME" | translate }}</p>
      </div>
    </div>

    <div class="blog-comments">
      <h2
        (click)="toggleComments()"
        (keydown.enter)="toggleComments()"
        tabindex="0"
        class="comments-header"
        [class.collapsed]="!showComments()"
      >
        {{ "BLOG.COMMENTS" | translate }} ({{ selectedComments().length }})
      </h2>

      <!-- Nur anzeigen, wenn showComments() true ist -->
      <div *ngIf="showComments()">
        <!-- Falls es Kommentare gibt -->
        <div *ngIf="selectedComments().length > 0; else noComments">
          <div
            class="comment"
            *ngFor="let comment of selectedComments(); trackBy: trackComment"
          >
            <p>
              <strong
                >{{ comment.author }}
                {{ "BLOG.COMMENT_SAYS" | translate }}</strong
              >
            </p>
            <p>{{ comment.content }}</p>
            <p>
              <small>
                <strong>{{ "BLOG.COMMENT_CREATED_AT" | translate }}</strong
                >: {{ comment.createdAt }}
              </small>
            </p>
            <p>
              <small>
                <strong>{{ "BLOG.COMMENT_UPDATED_AT" | translate }}</strong
                >: {{ comment.updatedAt }}
              </small>
            </p>
          </div>
        </div>
        <!-- Fallback, wenn keine Kommentare -->
        <ng-template #noComments>
          <p>{{ "BLOG.NO_COMMENTS" | translate }}</p>
        </ng-template>
      </div>
    </div>

    <div class="back-to-overview">
      <a routerLink="/overview" class="overview-button">
        ‚Üê {{ "BLOG.BACK_TO_OVERVIEW" | translate }}
      </a>
    </div>
  </div>
</div>
